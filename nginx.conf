events {}

http {
    server {
        listen 80;
        server_name localhost;
        root /usr/share/nginx/html;
        # 静态资源
        location /js/ {
            root /usr/share/nginx/html;
        }

        location /all_pic/ {
            root /usr/share/nginx/html;
        }

        location /goods_pic/ {
            root /usr/share/nginx/html;
        }

        # 根路径处理（前端应用）
        location /homepage.html {
            root /usr/share/nginx/html;
        }

        location /cartpage.html {
            root /usr/share/nginx/html;
        }

        location /administratorpage.html {
            root /usr/share/nginx/html;
        }

        location /personalpage.html {
            root /usr/share/nginx/html;
        }

        location /myfavoritepage.html {
            root /usr/share/nginx/html;
        }

        location /registerpage.html {
            root /usr/share/nginx/html;
        }

        location /searchpage.html {
            root /usr/share/nginx/html;
        }

        location = /login {
            proxy_pass http://go-backend:8080/login;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
         location = /register {
            proxy_pass http://go-backend:8080/register;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location /shouye {
            proxy_pass http://go-backend:8080/shouye;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location /searchs {
            proxy_pass http://go-backend:8080/searchs;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location /admin/products {
            proxy_pass http://go-backend:8080/admin/products;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location /addProduct {
            proxy_pass http://go-backend:8080/addProduct;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location /ownProducts {
            proxy_pass http://go-backend:8080/ownProducts;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location ~ ^/removeProduct/([0-9a-zA-Z_-]+)$ {
            proxy_pass http://go-backend:8080/removeProduct/$1;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location /cart {
            proxy_pass http://go-backend:8080/cart;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location ~ ^/cart/([0-9a-zA-Z_-]+)$ {
            proxy_pass http://go-backend:8080/cart/$1;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location  ~ ^/cart/([0-9a-zA-Z_-]+)/quantity$ {
            proxy_pass http://go-backend:8080/cart/$1/quantity;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location /orders {
            proxy_pass http://go-backend:8080/orders;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location ~ ^/orders/([0-9a-zA-Z_-]+)$ {
            proxy_pass http://go-backend:8080/orders/$1;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location ~ ^/orders/([0-9a-zA-Z_-]+)/pay$ {
            proxy_pass http://go-backend:8080/orders/$1/pay;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location /addresses {
            proxy_pass http://go-backend:8080/addresses;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        location ~ ^/addresses/([0-9a-zA-Z_-]+)$ {
            proxy_pass http://go-backend:8080/addresses/$1;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location ~ ^/users/([0-9a-zA-Z_-]+)$ {
            proxy_pass http://go-backend:8080/users/$1;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location = /favorite {
            proxy_pass http://go-backend:8080/favorite;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        location = /favorites {
            proxy_pass http://go-backend:8080/favorites;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
    }
}
